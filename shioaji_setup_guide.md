# 永豐金證券 Shioaji API 設定指南

## 📋 申請流程

### 1. 申請 API 使用權限
1. 登入永豐金證券官網
2. 前往「API服務」或「程式交易」頁面
3. 填寫 API 申請表單
4. 等待審核通過

### 2. 獲取 API 憑證
審核通過後，您會獲得：
- **API_KEY**：API 金鑰
- **SECRET_KEY**：秘密金鑰
- **憑證檔案**：`.p12` 格式的數位憑證
- **憑證密碼**：您在申請時設定的密碼

## 🔑 憑證密碼說明

### 憑證密碼是什麼？
- 憑證密碼是您在申請 API 時**自己設定的密碼**
- 用來保護 `.p12` 憑證檔案的安全
- 不是系統自動生成的，是您親自設定的

### 如果忘記憑證密碼？
1. **查看申請時的記錄**：檢查您申請時的郵件或文件
2. **聯絡永豐金客服**：
   - 客服電話：(02) 2312-3636
   - 說明您需要重設憑證密碼
3. **重新申請憑證**：可能需要重新下載憑證檔案

## 🛠️ 設定步驟

### 1. 準備檔案
確保您有以下檔案：
```
your-project/
├── .env                 # 環境變數檔案
├── your-cert.p12       # 憑證檔案
└── shioaji_demo.py     # 測試程式
```

### 2. 設定 .env 檔案
```env
API_KEY=您的實際API金鑰
SECRET_KEY=您的實際秘密金鑰
CA_CERT_PATH=C:\Users\danny_hui\Desktop\work\stock\your-cert.p12
CA_PASSWORD=您申請時設定的憑證密碼
```

### 3. 測試連接
```bash
python shioaji_demo.py
```

## ⚠️ 常見問題

### Q1: 憑證檔案放在哪裡？
**A**: 建議放在專案目錄中，並在 `CA_CERT_PATH` 中使用完整路徑。

### Q2: 模擬模式是什麼？
**A**: `simulation=True` 表示使用模擬交易環境，不會進行真實交易。

### Q3: 如何切換到真實交易？
**A**: 將 `simulation=False`，但請**非常小心**，確保程式邏輯正確。

## 🔒 安全提醒

1. **絕對不要**將 `.env` 檔案上傳到 Git
2. **妥善保管**您的 API 金鑰和憑證檔案
3. **定期更換**API 密碼和憑證
4. **先在模擬環境**測試所有功能 